.page {
  width: 100%;
  min-height: calc(100vh - 64px);
  background: #f3f4f6;
  display: flex;
  justify-content: center;
}

.container {
  width: 100%;
  max-width: 1180px;
  margin: 32px 0 40px;
  padding: 0 24px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

/* ===== TOP BAR ===== */
.topBar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}

.backBtn {
  border: none;
  background: transparent;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 13px;
  color: #2563eb;
  cursor: pointer;
  transition: background-color 0.15s ease, transform 0.1s ease;
}

.backBtn svg {
  font-size: 18px;
}

.backBtn:hover {
  background-color: #e0ecff;
  transform: translateY(-1px);
}

.lessonTitleBlock {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 4px;
}

.courseName {
  margin: 0;
  font-size: 12px;
  color: #6b7280;
}

.lessonTitle {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
  color: #111827;
}

/* ===== MAIN 2 CỘT ===== */
.mainLayout {
  display: grid;
  grid-template-columns: 240px minmax(0, 1fr);
  gap: 28px;
  align-items: flex-start;
}

/* =========================
   SIDEBAR: COURSE → CHAPTER → LESSON → CONTENT
   ========================= */
.leftNav {
  position: sticky;
  top: 96px; // chỉnh cho khớp chiều cao header global của bạn
  align-self: flex-start;
  background: #ffffff;
  border-radius: 18px;
  border: 1px solid #e5e7eb;
  padding: 12px 0 12px;
  box-shadow: 0 16px 40px rgba(15, 23, 42, 0.06);
  height: calc(100vh - 140px); // sidebar luôn gần full màn hình
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.courseHeader {
  border: none;
  background: transparent;
  padding: 10px 16px 12px;
  border-bottom: 1px solid #e5e7eb;
  text-align: left;
  cursor: pointer;
}

.courseHeaderTitle {
  font-size: 20px;
  font-weight: 700;
  color: #1d4ed8;
}

.sidebarError {
  padding: 10px 16px;
  font-size: 13px;
  color: #b91c1c;
}

.chapterList {
  padding: 6px 0 4px;
  overflow-y: auto;
}

.chapterItem + .chapterItem {
  border-top: 1px solid #f3f4f6;
}

/* Chapter header */
.chapterHeader {
  width: 100%;
  padding: 8px 14px;
  border: none;
  background: transparent;
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
}

.chapterHeader:hover {
  background: #f9fafb;
}

.chapterHeaderText {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.chapterIndex {
  font-size: 11px;
  color: #6b7280;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.chapterTitle {
  font-size: 15px;
  font-weight: 700;
  color: #111827;
}

.chapterArrow {
  font-size: 12px;
  color: #6b7280;
  transition: transform 0.15s ease;
}

.chapterArrowOpen {
  transform: rotate(180deg);
}
.chapterHeaderRight {
  display: flex;
  align-items: center;
  gap: 6px;
}
/* ===== LESSON LEVEL ===== */
.lessonList {
  padding: 0 10px 6px 18px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.lessonItem + .lessonItem {
  margin-top: 2px;
}

.lessonHeader {
  width: 100%;
  padding: 6px 8px;
  border: none;
  background: transparent;
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
  border-radius: 8px;
  transition: background-color 0.15s ease;
}

.lessonHeader:hover {
  background: #f9fafb;
}

.lessonHeaderMain {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.lessonTitleText {
  font-size: 14px;
  font-weight: 500;
  color: #111827;
}

.lessonArrow {
  font-size: 11px;
  color: #6b7280;
  transition: transform 0.15s ease;
}

.lessonArrowOpen {
  transform: rotate(180deg);
}

/* ===== LESSON CONTENTS ===== */
.lessonContentList {
  list-style: none;
  margin: 2px 0 4px;
  padding-left: 14px;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.lessonContentItem {
  border-radius: 10px;
  padding: 6px 8px;
  cursor: pointer;
  transition: background-color 0.15s ease, transform 0.1s ease;
}

.lessonContentItem:hover {
  background: #f3f4ff;
  transform: translateY(-1px);
}

.lessonContentItemActive {
  background: #e0ebff;
  border-radius: 10px;
}

.lessonContentTitle {
  margin: 0 0 1px;
  font-size: 12px;
  font-weight: 500;
  color: #111827;
}

.lessonContentSection {
  font-size: 12px;
  color: #6b7280;
}

.chapterStatusIcon,
.lessonStatusIcon,
.lessonContentDone {
  font-size: 13px;
  color: #16a34a; /* xanh lá completed */
}

/* =========================
   PLAYER PANEL
   ========================= */
.playerPanel {
  background: #ffffff;
  border-radius: 18px;
  border: 1px solid #e5e7eb;
  padding: 18px 20px 18px;
  box-shadow: 0 18px 50px rgba(15, 23, 42, 0.08);
  display: flex;
  flex-direction: column;
  height: calc(100vh - 140px); // gần full màn hình giống sidebar
}

.playerBody {
  margin-top: 2px;
  flex: 1;
  overflow-y: auto; // chỉ vùng này cuộn
}

/* ASSET */
.assetWrapper {
  width: 100%;
  border-radius: 16px;
  overflow: hidden;
  background: #000;
}

.video {
  width: 100%;
  max-height: 540px;
  display: block;
}

.image {
  width: 100%;
  max-height: 540px;
  object-fit: contain;
  display: block;
  background: #000;
}

.unknownAsset {
  padding: 16px;
  border-radius: 12px;
  background: #f9fafb;
  border: 1px dashed #d1d5db;
  font-size: 14px;
}

.unknownAsset a {
  color: #2563eb;
  font-weight: 500;
}

/* RICH TEXT */
.richText {
  padding: 10px 4px;
  font-size: 14px;
  line-height: 1.6;
  color: #111827;
}

.richText p {
  margin-bottom: 10px;
}

/* FLASHCARD */
.flashcardWrapper {
  padding: 16px 10px;
  border-radius: 12px;
  background: #f9fafb;
  border: 1px dashed #d1d5db;
  font-size: 14px;
}

/* FOOTER BUTTONS */
.playerFooter {
  margin-top: 12px;
  display: flex;
  justify-content: space-between;
  gap: 12px;
  flex-shrink: 0; // luôn hiện, không bị đẩy ra khỏi view
}

.primaryBtn,
.secondaryBtn {
  min-width: 150px;
  padding: 8px 16px;
  border-radius: 999px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  border: 1px solid transparent;
  transition: background-color 0.15s ease, color 0.15s ease,
    border-color 0.15s ease, transform 0.1s ease;
}

.primaryBtn {
  background: #2563eb;
  color: #ffffff;
  border-color: #2563eb;
}

.primaryBtn:hover:not(:disabled) {
  background: #1d4ed8;
  border-color: #1d4ed8;
  transform: translateY(-1px);
}

.secondaryBtn {
  background: #f3f4f6;
  color: #111827;
  border-color: #e5e7eb;
}

.secondaryBtn:hover:not(:disabled) {
  background: #e5e7eb;
  transform: translateY(-1px);
}

.primaryBtn:disabled,
.secondaryBtn:disabled {
  opacity: 0.5;
  cursor: default;
  transform: none;
}
.markBtn {
  min-width: 160px;
  padding: 8px 16px;
  border-radius: 999px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  background: #ffffff;
  color: #2563eb;
  border: 1px solid #2563eb;
  transition: background-color 0.15s ease, color 0.15s ease,
    border-color 0.15s ease, transform 0.1s ease;
}

.markBtn:hover:not(:disabled) {
  background: #e0ecff;
  transform: translateY(-1px);
}

.markBtn:disabled {
  opacity: 0.7;
  cursor: default;
  transform: none;
}

/* STATES */
.loading,
.error {
  width: 100%;
  margin-top: 40px;
  text-align: center;
  font-size: 14px;
}

.error {
  color: #b91c1c;
}

.emptyState {
  text-align: center;
  padding: 40px 0;
  font-size: 14px;
}

/* RESPONSIVE */
@media (max-width: 960px) {
  .mainLayout {
    grid-template-columns: 1fr;
  }

  .leftNav {
    max-height: 260px;
    order: 2;
  }

  .playerPanel {
    order: 1;
  }

  .lessonTitleBlock {
    align-items: flex-start;
  }
}

.flashcardHint {
  margin-top: 8px;
  font-size: 12px;
  color: #6b7280;
}

/* === Modal overlay === */
.flashcardModalOverlay {
  position: fixed;
  inset: 0;
  background: rgba(15, 23, 42, 0.55);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.flashcardModal {
  width: min(640px, 96vw);
  max-height: 90vh;
  background: #ffffff;
  border-radius: 20px;
  padding: 20px 24px 24px;
  box-shadow: 0 24px 80px rgba(15, 23, 42, 0.25);
  display: flex;
  flex-direction: column;
}

.flashcardModalHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}

.flashcardModalTitle {
  font-size: 16px;
  font-weight: 700;
  color: #111827;
}

.flashcardCloseBtn {
  border: none;
  background: transparent;
  font-size: 22px;
  line-height: 1;
  cursor: pointer;
  color: #6b7280;
}

.flashcardModalBody {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 16px;
  font-size: 14px;
  color: #111827;
}

/* === Card flip === */
.flashcardCardWrapper {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 24px 0;
  perspective: 1200px; // quan trọng để flip 3D
}

.flashcardCard {
  width: 100%;
  max-width: 420px;
  aspect-ratio: 3 / 2;
  perspective: 1000px;
  border: none;
  background: transparent;
  padding: 0;
  cursor: pointer;
}

.flashcardInner {
  position: relative;
  width: 520px;
  max-width: 100%;
  height: 320px;
  transition: transform 0.5s;
  transform-style: preserve-3d;
  border-radius: 18px;
  box-shadow: 0 18px 45px rgba(15, 23, 42, 0.18);
  background: #ffffff;
}

.flashcardInnerFlipped {
  transform: rotateY(180deg);
}

.flashcardFace {
  position: absolute;
  inset: 0;
  border-radius: 24px;
  background: #f5f7ff;
  box-shadow: 0 24px 60px rgba(15, 23, 42, 0.12);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 32px;
  text-align: center;
  backface-visibility: hidden;
}

.flashcardFaceFront {
  background: #eef2ff;
  color: #111827;
}

.flashcardFaceBack {
  display: flex;
  flex-direction: column; /* xếp dọc */
  justify-content: center;
  align-items: center;
  padding: 24px 32px;
  text-align: center;
  gap: 12px; /* khoảng cách giữa các dòng */
  line-height: 1.5;
  transform: rotateY(180deg);
}
/* Nghĩa chính */
.flashcardFrontMain {
  font-size: 28px;
  font-weight: 700;
  color: #111827;
  word-break: break-word;
}
.flashcardBackMain {
  font-size: 28px;
  font-weight: 700;
  color: #111827;
  margin-bottom: 10px;
  word-break: break-word; /* nếu từ dài quá thì tự xuống dòng */
}

/* Cách đọc */
.flashcardBackReading {
  font-size: 18px;
  font-weight: 500;
  color: #4b5563;
  margin-bottom: 8px;
  word-break: break-word;
}

/* Câu ví dụ */
.flashcardBackExample {
  font-size: 16px;
  color: #6b7280;
  line-height: 1.5;
  word-break: break-word;
}
/* === Controls === */
.flashcardControls {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.flashcardCounter {
  font-size: 13px;
  color: #6b7280;
}

.flashcardNavButtons {
  display: flex;
  gap: 8px;
}

.flashcardError {
  color: #b91c1c;
  font-size: 13px;
}
.commentsSection {
  margin-top: 16px;
  width: 100%;
  max-width: 100%;
}
/* LessonPlayerPage.module.scss */
.commentsWrap {
  width: 100%;
  max-width: 100%;
  padding: 0; /* hoặc cùng padding container nếu bạn muốn */
}
.commentsOuter {
  width: 100%;
  margin-top: 18px;
}

.commentsInner {
  /* canh giống container của page (giữ đồng bộ bề ngang) */
  max-width: 1200px; /* hoặc đúng max-width container của bạn */
  margin: 0 auto;
  padding: 0 16px; /* giống padding container */
}

/* ===== QUIZ OVERVIEW CARD ===== */
.quizOverviewCard {
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 16px;
  padding: 18px 18px 14px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.04);
}

.quizHeader {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 10px;
}

.quizHeaderLeft {
  min-width: 0;
}

.quizEyebrow {
  display: flex;
  gap: 10px;
  align-items: center;
  margin-bottom: 6px;
}

.quizChip {
  font-size: 12px;
  font-weight: 500;
  letter-spacing: 0.06em;
  padding: 6px 10px;
  border-radius: 999px;
  background: #eef2ff;
  color: #3730a3;
}

.quizSectionName {
  font-size: 13px;
  color: #6b7280;
}

.quizTitle {
  margin: 0;
  font-size: 20px;
  font-weight: 700;
  line-height: 1.2;
  color: #111827;
}

.quizDescription {
  margin: 8px 0 0;
  color: #4b5563;
  line-height: 1.5;
}

.quizHeaderRight {
  flex-shrink: 0;
}

.badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 700;
  font-size: 12px;
  border: 1px solid transparent;
}

.badgeSuccess {
  background: #ecfdf5;
  color: #065f46;
  border-color: #a7f3d0;
}

.badgeDanger {
  background: #fef2f2;
  color: #991b1b;
  border-color: #fecaca;
}

.badgeWarn {
  background: #fffbeb;
  color: #92400e;
  border-color: #fde68a;
}

.badgeInfo {
  background: #eff6ff;
  color: #1d4ed8;
  border-color: #bfdbfe;
}

.muted {
  color: #6b7280;
}

.divider {
  border: 0;
  border-top: 1px solid #e5e7eb;
  margin: 14px 0;
}

.quizMetaGrid {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 10px;
  margin-top: 14px;
}

.metaBox {
  background: #f9fafb;
  border: 1px solid #eef2f7;
  border-radius: 12px;
  padding: 10px 12px;
}

.metaLabel {
  font-size: 12px;
  color: #6b7280;
  margin-bottom: 4px;
}

.metaValue {
  font-size: 16px;
  font-weight: 500;
  color: #111827;
}

.quizQuickStats {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
  margin-top: 10px;
}

.quickStat {
  border: 1px solid #eef2f7;
  border-radius: 12px;
  padding: 10px 12px;
  background: #fff;
}

.quickLabel {
  font-size: 12px;
  color: #6b7280;
  margin-bottom: 4px;
}

.quickValue {
  font-size: 18px;
  font-weight: 500;
  color: #111827;
}

.quizActionsRow {
  display: flex;
  gap: 12px;
  align-items: center;
  margin-top: 14px;
}

.quizHint {
  font-size: 13px;
  color: #6b7280;
  line-height: 1.4;
}

.quizHistoryHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}

.quizHistoryTitle {
  margin: 0;
  font-size: 16px;
  font-weight: 700;
  color: #111827;
}

.quizAttemptTable {
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  overflow: hidden;
}

.quizAttemptHead {
  display: grid;
  grid-template-columns: 80px 120px 140px 1fr 120px;
  gap: 10px;
  padding: 10px 12px;
  background: #f9fafb;
  color: #6b7280;
  font-weight: 700;
  font-size: 12px;
}

.quizAttemptRow {
  display: grid;
  grid-template-columns: 80px 120px 140px 1fr 120px;
  gap: 10px;
  padding: 12px;
  border-top: 1px solid #eef2f7;
  align-items: center;
}

.cellStrong {
  font-weight: 700;
  color: #111827;
}

.rowActions {
  display: flex;
  justify-content: flex-end;
}

@media (max-width: 1100px) {
  .quizMetaGrid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
  .quizAttemptHead,
  .quizAttemptRow {
    grid-template-columns: 70px 110px 120px 1fr 110px;
  }
}

@media (max-width: 720px) {
  .quizActionsRow {
    flex-direction: column;
    align-items: stretch;
  }
}
